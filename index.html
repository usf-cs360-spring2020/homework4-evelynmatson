<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SF Fire Calls Hierarchy Homepage</title>


    <!-- Load Bulma from CDN (consider saving it to repository instead) -->
    <!-- https://bulma.io/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">

    <!-- Load Font Awesome 5 (free) icons -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

    <!-- include d3.js v5 -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <!-- include d3.js modules -->
    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>

<!--    My Css!-->
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
  <!-- Page header -->
  <!-- https://bulma.io/documentation/layout/hero/ -->
  <section class="hero is-primary is-bold">
    <div class="hero-body">
      <div class="container">
        <h1 class="title">SF Fire Calls Hierarchy Visualization</h1>
        <h2 class="subtitle">By Evelyn Matson for CS 360 'Data Visualization'</h2>
      </div>
    </div>
  </section>
  <!-- End page header -->

  <!-- Page navigation -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
<!--        <a class="navbar-item" href="index.html">-->
<!--          <span class="icon"><i class="fas fa-home"></i></span>-->
<!--          <span>Home</span>-->
<!--        </a>-->

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="main-menu" class="navbar-menu has-text-weight-medium">
        <!-- Left navbar items -->
        <div class="navbar-start">
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link"  href="index.html">
              Info
            </a>

            <div class="navbar-dropdown">
              <a class="navbar-item" href="index.html#about" title="About the Assignment">
                <span class="icon"><i class="far fa-file-alt"></i></span>
                <span>Assignment</span>
              </a>
              <a class="navbar-item" href="index.html#data" title="Dataset Info">
                <span class="icon"><i class="fas fa-table"></i></span>
                <span>Dataset</span>
              </a>
              <a class="navbar-item" href="index.html#wrangling" title="Dataset Info">
                <span class="icon"><i class="fas fa-wrench"></i></span>
                <span>Wrangling</span>
              </a>
              <a class="navbar-item" href="index.html#bio" title="About Me">
                <span class="icon"><i class="fas fa-info-circle"></i></span>
                <span>About me</span>
              </a>
    <!--          <a class="navbar-item is-active"  href="1.html">-->
    <!--            <span class="icon"><i class="fas fa-chart-line"></i></span>-->
    <!--            <span>Domestic vs. International</span>-->
    <!--          </a>-->
    <!--          <a class="navbar-item"  href="2.html">-->
    <!--            <span class="icon"><i class="fas fa-chart-area"></i></span>-->
    <!--            <span>Intl. by Region</span>-->
    <!--          </a>-->

    <!--          &lt;!&ndash; <hr class="navbar-divider"> &ndash;&gt;-->

    <!--          <a class="navbar-item"  href="3.html">-->
    <!--            <span class="icon"><i class="fas fa-chart-bar"></i></span>-->
    <!--            <span>Terminal Growth</span>-->
    <!--          </a>-->
              <!-- <a class="navbar-item">
                <span class="icon"><i class="fas fa-chart-pie"></i></span>
                <span>Pie Chart</span>
              </a> -->
            </div>
          </div>
          <a class="navbar-item" href="vis.html" title="visualization">
            <span class="icon"><i class="fas fa-chart-line"></i></span>
            <span>Visualization</span>
          </a>

        </div>

        <!-- Right navbar items -->
        <div class="navbar-end">
        <a class="navbar-item" href="grade.html" title="About">
          <span class="icon"><i class="fas fa-tasks"></i></span>
          <span>Grade</span>
        </a>
      </div>
      </div>

  <!--      <a class="navbar-item" href="index.html#about" title="About">-->
  <!--        <span class="icon"><i class="fas fa-info-circle"></i></span>-->
  <!--        <span>About Me</span>-->
  <!--      </a>-->

    </div>
  </nav>
  <!-- End page navigation -->

  <section class="section">
    <div class="container">
      <!-- Begin page content -->
      <div class="content">

        <h2 id="about">
          About the Assignment
        </h2>
        <p>This is my fourth homework assignment for CS 360: Data Visualization during spring semester 2020 with Sophie Engle.
          We were given this dataset on San Francisco's Fire Department calls for service reports to use for some sort of hierarchical visualization.
          After exploring the dataset, I decided to organize it by call type (broader group then specific type), and by neighborhood.
        </p>

        <h2 id="data">Dataset Info</h2>
        <p>The dataset is published under the <a href="www.opendatacommons.org/licenses/pddl/1.0/">Public Domain Dedication and License v1.0</a>. I accessed it on April 15th 2020 at <a href="https://data.sfgov.org/City-Infrastructure/311-Cases/vw6y-z8j6">data.sfgov.org</a>.</p>


        <div class="tile is-ancestor">
          <div class="tile is-4 is-vertical is-parent">
            <div class="tile is-child box">
              <p class="title">Accessed</p>
              <p class="subtitle">April 15th, 2020</p>
            </div>
            <div class="tile is-child box">
              <p class="subtitle">Columns</p>
              <p class="title">34</p>
            </div>
          </div>
          <div class="tile is-parent is-8">
            <div class="tile is-child box">
              <p class="title">
                San Francisco 311 Cases</p>
              <p>SF311 cases created since 7/1/2008 with location information.
                This dataset includes all fire unit responses to calls in San Francisco, California. Each response includes the call number, incident number, address, unit identifier, call type, disposition, and relevant time intervals. This dataset is updated daily and includes over 5.21 million responses.
            </div>
          </div>
        </div>

        <h4 class="title">
          Relevant Columns
        </h4>

        <table class="table">
          <thead>
          <tr>
            <th>Column Name</th>
            <th>Description</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <th>Entry Time</th>
            <td>Date and time the 911 operator submits the entry of the initical call information into the CAD system</td>
          </tr>
          <tr>
            <th>Call Type Group</th>
            <td>Call types: Fire, Alarm, Potential Life Threatening, Non Life Threatening, and Null</td>
          </tr>
          <tr>
            <th>Call Type</th>
            <td>
              Type of call the incident falls into. Relevant types (among others):
              <ul>
                <li>Medical Incident</li>
                <li>Structure Fire</li>
                <li>Traffic Collision</li>
              </ul>
            </td>
          </tr>
          <tr>
            <th>Neighborhoods - Analysis Boundaries</th>
            <td>Neighborhood District associated with this address.</td>
          </tr>
          </tbody>
        </table>

        <h2 id="wrangling">Data Wrangling</h2>
        <p>I filtered the dataset when downloading it from data.sfgov.org, (see screenshot <a href="resources/filtering%20on%20sfdata.png">here</a> for details), in the following way:</p>
        <ul>
          <li>I grouped first by "Neighborhoods - Analysis Boundaries"</li>
          <li>Next, I grouped by "Call Type Group"</li>
          <li>Finally, I grouped by "Call Type"</li>
          <li>I used a 'Roll-Up' operation by Incident Count, and used the 'Count' function.</li>
          <li>Lastly, I sorted (descending) by "Received DtTm".</li>
          <li>Additionally, I used the filter operation to select only rows with a "Received DtTm" in 2019.</li>
        </ul>



        <p>See here for my data as downloaded and as it is loaded into D3.js: <a href="resources/Fire_Department_Calls_for_Service.csv">Fire_Department_Calls_for_Service.csv</a>.</p>
        <p>Then I loaded the data into D3.js for the last bit of wrangling. I had to create nodes for the mid and top levels of the hierarchy (one for each Call Type Group, and one for each Call Type), define a unique name and the correct parent name for each node, filter out duplicate nodes, then I used d3.stratify() to make the hierarchy format. After this, I had to calculate incident counts for each node (summing the values of each descendent node for the non-leaf nodes), and finally sort by largest incident count first. See the wrangle() function in my javascript file here: <a href="vis.js">vis.js</a>.</p>

        <h2 id="bio">About me</h2><br>

        <!-- Profile box -->
        <!-- https://bulma.io/documentation/layout/media-object/ -->
        <article class="media">
          <figure class="media-left">
            <p class="image is-128x128"><img class="is-rounded" src="resources/profile.jpg"></p>
          </figure>

          <div class="media-content">
            <div class="content">
              <p>
                <strong>Eve Matson</strong><br/>
                Computer Science Major, <a href="https://www.usfca.edu/">University of San Francisco</a><br/>
                <em>Expected Graduation: 2021</em><br/>
                <i class="fas fa-envelope" style="margin-right: 3px"></i> <a href="mailto:ematson@dons.usfca.edu">ematson@dons.usfca.edu</a>
                   <i class="fab fa-github" style="margin-left: 10px; margin-right: 3px"></i> <a href="https://github.com/evelynmatson">evelynmatson</a>
              </p>

              <p>
                I am a junior Computer Science Major at USF, and expect to graduate in May 2021. I'm from Seattle and enjoy doing computer science, physics and theatre!
              </p>

              <div class="heading">Skills</div>

              <div class="tags">
                <span class="tag">Java</span>
                <span class="tag">Python</span>
                <span class="tag">C</span>
                <span class="tag">JavaScript</span>
                <span class="tag">HTML</span>
                <span class="tag">CSS</span>
              </div>
            </div>
          </div>
        </article>
        <!-- End profile box -->

      </div>
    </div>
    <!-- End page content -->
  </section>
<!--  </main>-->

  <!-- Page footer -->
<!--  <div class="false-footer"></div>-->
  <!-- https://bulma.io/documentation/layout/footer/ -->
  <footer class="footer smaller-footers-are-better">
    <div class="content has-text-centered is-size-7">
      <p>
        <a href="https://fontawesome.com/" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-font-awesome"></i>&nbsp;<strong>FontAwesome</strong>
        </a>

        <a href="https://bulma.io" class="button is-small">
          <img src="https://bulma.io/images/made-with-bulma--semiblack.png" alt="Made with Bulma" width="128" height="24">
        </a>
      </p>
    </div>
  </footer>
  <!-- End page footer -->

  <!-- Mobile menu responsiveness -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    }
  });
  </script>
  <!-- End mobile menu responsiveness -->


  </body>

</html>
